let pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=150";function n(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):alert("Please select a PokÃ©mon.")}function o(e){l(e).then(function(){!function(e){let t=document.querySelector(".modal-title"),n=document.querySelector(".modal-body"),o=document.createElement("h1");o.innerText="Name: "+e.name[0].toUpperCase()+e.name.slice(1);let l=document.createElement("p");l.innerText="Height: "+e.height;let a=document.createElement("p");a.innerText="Types: "+e.types.map(e=>e.type.name);let i=document.createElement("img");i.src=e.imageUrl,t.append(o),n.append(l),n.append(a),n.append(i),$(".modal").on("hidden.bs.modal",function(){$(".modal-body").html("")&&$(".modal-title").html("")})}(e)})}function l(e){let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types}).catch(function(e){console.error(e)})}return{getAll:function(){return e},add:n,addListItem:function(e){let t=document.querySelector(".list-group"),n=document.createElement("li");n.classList.add("list-group-item");let l=document.createElement("button");l.innerText=e.name,l.classList.add("btn-secondary"),l.setAttribute("data-toggle","modal"),l.setAttribute("data-target","#modalContainer"),n.appendChild(l),t.appendChild(n),l.addEventListener("click",function(){o(e)})},loadList:function(){return fetch(t).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){let t={name:e.name[0].toUpperCase()+e.name.slice(1),detailsUrl:e.url};n(t),console.log(t)})}).catch(function(e){console.error(e)})},loadDetails:l,showDetails:o,searchFunction:function(){var e,t,n,o,l;for(t=(e=document.getElementById("search-bar")).value.toUpperCase(),n=document.querySelector(".list-group").getElementsByTagName("li"),l=0;l<n.length;l++)((o=n[l].getElementsByTagName("button")[0]).textContent||o.innerText).toUpperCase().indexOf(t)>-1?n[l].style.display="":n[l].style.display="none";e.addEventListener("keypress",function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("search-button").click())})}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});
